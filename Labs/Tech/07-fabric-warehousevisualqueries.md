# Exercise 7: Exploring Data Using Visual Queries in the Warehouse

In this exercise, you will learn how to use visual queries in the Microsoft Fabric warehouse. This feature allows users to interact with their data visually and perform basic transformations without needing to write SQL code. We will use the SQL Endpoint of `lh_operations` (you can also use lh_staging) to create a query and explore its visual query capabilities.

---

## **Duration**: 15 minutes

---

## **Objective**

By the end of this exercise, you will:
- Connect to the SQL endpoint of `lh_operations`.
- Create a visual query for the `Person` table.
- Explore and transform data using visual tools.

---

## **Steps**

### **Step 1: Connect to the SQL Endpoint**
1. Navigate to the **SQL endpoint** of the `lh_operations` Lakehouse in your Analytics workspace.
2. Click **New Visual Query** to start creating a visual query. 
   
   ![New Visual Query](<../../media/Visual Query/warehouse visual query - (1).png>)
---

### **Step 2: Add a Table to the Visual Query**
1. In the Explorer pane, expand the `lh_operations` database.
2. Locate the `Person` table and select **Insert into canvas**.
   
   ![Insert Person Table](<../../media/Visual Query/warehouse visual query - (3).png>)

3. The `Person` table will appear as a node in your visual query canvas.

---

### **Step 3: Explore Data Using Visual Tools**
1. Once the table is added, explore the following options in the visual query toolbar:
   - **Manage Columns**: Select or deselect the columns to include in the query.
   - **Reduce Rows**: Apply filters to limit the number of rows. For example, use the **Filter Rows** option to display only records where `PersonType` is `'EM'`.
   - **Sort**: Sort the data by `LastName` in ascending order.
   - **Combine**: Add joins if needed to bring in data from other tables.

2. Enable **Column Profile** by selecting the gear icon and checking **Show column quality details** and **Show column value distribution**. This will help you identify missing or inconsistent data.
   
   ![Enable Options](<../../media/Visual Query/warehouse visual query - (4).png>)


3. Save the query for future use by selecting **Save as View**.

---

### **Step 5: Additional Transformations**
1. Perform additional transformations like adding calculated columns or grouping data:
   - Use **Transform** > **Group By** to aggregate data by `PersonType` and count the number of records for each type.


2. View the SQL code generated by the visual query by selecting **View SQL**.


---


## **Summary**

In this exercise, you connected to the `lh_operations` Lakehouse SQL endpoint, created a visual query for the `Person` table, and explored its features to filter, sort, and analyse data visually. These tools enable non-technical users to manipulate data effectively while generating SQL code for advanced users.

--- 

**Note**: Ensure to save your query and transformations to avoid losing your work.
